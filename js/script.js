!function(a){var t=a("#search-form-wrap"),e=!1,n=200,o=function(){e=!0},i=function(a){setTimeout(function(){e=!1,a&&a()},n)};a("#nav-search-btn").on("click",function(){e||(o(),t.addClass("on"),i(function(){a(".search-form-input").focus()}))}),a(".search-form-input").on("blur",function(){o(),t.removeClass("on"),i()}),a("body").on("click",function(){a(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e=a(this),n=e.attr("data-url"),o=encodeURIComponent(n),i="article-share-box-"+e.attr("data-id"),s=e.offset();if(a("#"+i).length){var c=a("#"+i);if(c.hasClass("on"))return void c.removeClass("on")}else{var r=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+n+'">','<div class="article-share-links">','<a href="https://plus.google.com/share?url='+o+'" class="article-share-google" target="_blank" title="Google+"></a>','<a href="https://www.facebook.com/sharer.php?u='+o+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="https://twitter.com/intent/tweet?url='+o+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+o+'" class="article-share-qq" target="_blank" title="QQ 空间"></a>',"</div>","</div>"].join(""),c=a(r);a("body").append(c)}a(".article-share-box.on").hide(),c.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(a){a.stopPropagation()}).on("click",".article-share-box-input",function(){a(this).select()}).on("click",".article-share-box-link",function(a){a.preventDefault(),a.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),a(".article-entry").each(function(t){a(this).find("img").each(function(){if(!a(this).parent().hasClass("fancybox")){var t=this.alt;t&&a(this).after('<span class="caption">'+t+"</span>"),a(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}}),a(this).find(".fancybox").each(function(){a(this).attr("rel","article"+t)})}),a.fancybox&&a(".fancybox").fancybox();var s=a("#container"),c=!1,r=200,l=function(){c=!0},h=function(){setTimeout(function(){c=!1},r)};a("#main-nav-toggle").on("click",function(){c||(l(),s.toggleClass("mobile-nav-on"),h())}),a("#wrap").on("click",function(){!c&&s.hasClass("mobile-nav-on")&&s.removeClass("mobile-nav-on")})}(jQuery);